/* 
 * æˆ‘çš„ä¸ªäºº Cherry Studio è‡ªå®šä¹‰æ ·å¼
 * 
 * è®¾è®¡ç†å¿µï¼š
 * - æ¸…æ™°çš„è§†è§‰å±‚æ¬¡
 * - èˆ’é€‚çš„é˜…è¯»ä½“éªŒ
 * - ä¸“ä¸šçš„å¤–è§‚
 * - ç»†èŠ‚çš„æ‰“ç£¨
 * 
 * ä½¿ç”¨æ–¹æ³•ï¼š
 * å¤åˆ¶æ­¤æ–‡ä»¶å…¨éƒ¨å†…å®¹ï¼Œç²˜è´´åˆ° Cherry Studio è®¾ç½® â†’ æ˜¾ç¤º â†’ è‡ªå®šä¹‰ CSS
 */

/* ========================================
 * 1. å…¨å±€ä¼˜åŒ–
 * ======================================== */

/* å¹³æ»‘æ»šåŠ¨ */
html {
  scroll-behavior: smooth;
}

/* å…¨å±€åœ†è§’è°ƒæ•´ */
:root {
  --radius: 12px;
  --list-item-border-radius: 12px;
}

/* å­—ä½“å¾®è°ƒï¼ˆå¯é€‰ï¼‰ */
body {
  letter-spacing: 0.02em;
}


/* ========================================
 * 2. æ¶ˆæ¯æ°”æ³¡ç¾åŒ–
 * ======================================== */

/* ç”¨æˆ·æ¶ˆæ¯ - å³å¯¹é½æ°”æ³¡ */
.message-user .message-content-container {
  background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-soft) 100%) !important;
  border-radius: 16px 16px 4px 16px !important;
  box-shadow: 0 2px 12px rgba(0, 185, 107, 0.25);
  padding: 12px 16px !important;
  max-width: 85%;
}

/* AI åŠ©æ‰‹æ¶ˆæ¯ - å·¦å¯¹é½æ°”æ³¡ */
.message-assistant .message-content-container {
  background: var(--color-background-soft) !important;
  border-radius: 16px 16px 16px 4px !important;
  border-left: 3px solid var(--color-primary);
  padding: 12px 16px !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

/* æ¶ˆæ¯æ·¡å…¥åŠ¨ç”» */
.message-content-container {
  animation: messageSlideIn 0.3s ease-out;
}

@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* æ¶ˆæ¯æ‚¬åœæ•ˆæœ */
.message-content-container:hover {
  transform: translateY(-2px);
  transition: all 0.2s ease;
}


/* ========================================
 * 3. Markdown å†…å®¹ä¼˜åŒ–
 * ======================================== */

/* æ ‡é¢˜æ ·å¼å¢å¼º */
.markdown h1 {
  font-size: 2em !important;
  font-weight: 700 !important;
  margin: 1.2em 0 0.8em 0 !important;
  padding-bottom: 0.4em !important;
  border-bottom: 2px solid var(--color-primary) !important;
}

.markdown h2 {
  font-size: 1.6em !important;
  font-weight: 600 !important;
  margin: 1em 0 0.6em 0 !important;
  padding-bottom: 0.3em !important;
  border-bottom: 1px solid var(--color-border) !important;
}

.markdown h3 {
  font-size: 1.3em !important;
  font-weight: 600 !important;
  margin: 0.8em 0 0.5em 0 !important;
  color: var(--color-primary);
}

/* æ®µè½ä¼˜åŒ– */
.markdown p {
  margin: 1em 0 !important;
  line-height: 1.8 !important;
}

/* é“¾æ¥ç¾åŒ– */
.markdown a,
.link {
  color: var(--color-primary) !important;
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: all 0.2s ease;
}

.markdown a:hover,
.link:hover {
  border-bottom: 1px solid var(--color-primary);
  opacity: 0.8;
}


/* ========================================
 * 4. ä»£ç å—ç¾åŒ–
 * ======================================== */

/* è¡Œå†…ä»£ç  */
.markdown p code,
.markdown li code {
  background: var(--color-primary-mute) !important;
  color: var(--color-primary) !important;
  padding: 3px 6px !important;
  border-radius: 4px !important;
  font-size: 0.9em !important;
  font-weight: 500;
}

/* ä»£ç å— */
.markdown pre {
  border-radius: 12px !important;
  padding: 16px !important;
  margin: 1.5em 0 !important;
  border: 1px solid var(--color-border) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

.markdown pre code {
  font-size: 14px !important;
  line-height: 1.6 !important;
}

/* ä»£ç å—è¯­è¨€æ ‡ç­¾ç¾åŒ–ï¼ˆå¦‚æœæ”¯æŒï¼‰ */
.code-block-header {
  background: var(--color-background-mute) !important;
  border-bottom: 1px solid var(--color-border);
  padding: 8px 16px !important;
  font-size: 12px;
  font-weight: 600;
  color: var(--color-text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}


/* ========================================
 * 5. åˆ—è¡¨ä¼˜åŒ–
 * ======================================== */

.markdown ul,
.markdown ol {
  margin: 1em 0 !important;
  padding-left: 2em !important;
}

.markdown li {
  margin-bottom: 0.6em !important;
  line-height: 1.7 !important;
}

/* è‡ªå®šä¹‰åˆ—è¡¨æ ‡è®° */
.markdown ul li::marker {
  color: var(--color-primary);
  font-size: 1.2em;
}

.markdown ol li::marker {
  color: var(--color-primary);
  font-weight: 600;
}


/* ========================================
 * 6. å¼•ç”¨å—ç¾åŒ–
 * ======================================== */

.markdown blockquote,
.markdown .markdown-alert {
  margin: 1.5em 0 !important;
  padding: 16px 20px !important;
  border-radius: 8px !important;
  border-left: 4px solid var(--color-primary) !important;
  background: linear-gradient(90deg, 
    var(--color-primary-mute) 0%, 
    transparent 100%) !important;
  font-style: normal !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.markdown blockquote p {
  margin: 0.5em 0 !important;
}


/* ========================================
 * 7. è¡¨æ ¼ç¾åŒ–
 * ======================================== */

.markdown table {
  margin: 2em 0 !important;
  border-radius: 12px !important;
  overflow: hidden !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border: 1px solid var(--color-border) !important;
}

.markdown th {
  background: var(--color-primary) !important;
  color: white !important;
  font-weight: 600 !important;
  text-align: left !important;
  padding: 12px 16px !important;
}

.markdown td {
  padding: 12px 16px !important;
  border-bottom: 1px solid var(--color-border) !important;
}

.markdown tr:hover {
  background: var(--color-background-soft) !important;
  transition: background 0.2s ease;
}

.markdown tr:last-child td {
  border-bottom: none !important;
}


/* ========================================
 * 8. å›¾ç‰‡ä¼˜åŒ–
 * ======================================== */

.markdown img {
  border-radius: 12px !important;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  margin: 1.5em 0 !important;
  max-width: 100%;
  transition: all 0.3s ease;
}

.markdown img:hover {
  transform: scale(1.02);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}


/* ========================================
 * 9. æ»šåŠ¨æ¡ç¾åŒ–
 * ======================================== */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--color-primary-soft);
  border-radius: 10px;
  transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-primary);
}


/* ========================================
 * 10. é€‰ä¸­æ–‡æœ¬ç¾åŒ–
 * ======================================== */

::selection {
  background: var(--color-primary);
  color: white;
}

::-moz-selection {
  background: var(--color-primary);
  color: white;
}


/* ========================================
 * 11. è¾“å…¥æ¡†ä¼˜åŒ–
 * ======================================== */

textarea:focus,
input:focus {
  outline: none !important;
  border-color: var(--color-primary) !important;
  box-shadow: 0 0 0 3px var(--color-primary-mute) !important;
  transition: all 0.2s ease;
}


/* ========================================
 * 12. æ•°å­¦å…¬å¼ç¾åŒ–ï¼ˆå¦‚æœä½¿ç”¨ KaTeXï¼‰
 * ======================================== */

.katex,
mjx-container {
  padding: 4px 8px !important;
  border-radius: 4px;
  background: var(--color-background-soft);
}


/* ========================================
 * 13. è„šæ³¨ç¾åŒ–
 * ======================================== */

.footnotes {
  margin-top: 2em !important;
  padding: 16px 20px !important;
  background: var(--color-background-soft) !important;
  border-radius: 12px !important;
  border-left: 3px solid var(--color-primary);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.footnotes h4 {
  color: var(--color-primary) !important;
  font-weight: 600 !important;
  margin-bottom: 12px !important;
}

.markdown .footnote-ref {
  background: var(--color-primary);
  color: white;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.8em;
  font-weight: 600;
  text-decoration: none;
  margin: 0 2px;
  transition: all 0.2s ease;
}

.markdown .footnote-ref:hover {
  opacity: 0.8;
  transform: translateY(-1px);
}


/* ========================================
 * 14. æš—è‰²æ¨¡å¼ç‰¹æ®Šä¼˜åŒ–
 * ======================================== */

[theme-mode='dark'] .message-user .message-content-container {
  box-shadow: 0 2px 12px rgba(0, 185, 107, 0.3);
}

[theme-mode='dark'] .markdown pre {
  background: #1a1a1a !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
}

[theme-mode='dark'] .markdown table {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}


/* ========================================
 * 15. äº®è‰²æ¨¡å¼ç‰¹æ®Šä¼˜åŒ–
 * ======================================== */

[theme-mode='light'] .message-user .message-content-container {
  color: white !important;
}

[theme-mode='light'] .message-assistant .message-content-container {
  background: #f8f9fa !important;
}

[theme-mode='light'] .markdown pre {
  background: #f5f5f5 !important;
  border: 1px solid #e0e0e0 !important;
}


/* ========================================
 * 16. å“åº”å¼è°ƒæ•´
 * ======================================== */

/* å°å±å¹•ä¼˜åŒ– */
@media (max-width: 768px) {
  .message-content-container {
    max-width: 95% !important;
  }
  
  .markdown h1 {
    font-size: 1.8em !important;
  }
  
  .markdown h2 {
    font-size: 1.5em !important;
  }
}


/* ========================================
 * 17. å…¶ä»–ç»†èŠ‚ä¼˜åŒ–
 * ======================================== */

/* åˆ†éš”çº¿ç¾åŒ– */
.markdown hr {
  border: none !important;
  height: 2px !important;
  background: linear-gradient(90deg, 
    transparent 0%, 
    var(--color-primary) 50%, 
    transparent 100%) !important;
  margin: 2em 0 !important;
}

/* å¼ºè°ƒæ–‡æœ¬ */
.markdown strong {
  color: var(--color-primary);
  font-weight: 700;
}

/* æ–œä½“æ–‡æœ¬ */
.markdown em {
  font-style: italic;
  color: var(--color-text-secondary);
}

/* åˆ é™¤çº¿ */
.markdown del {
  opacity: 0.6;
}

/* ä¸Šæ ‡å’Œä¸‹æ ‡ */
.markdown sup {
  background: var(--color-primary);
  color: white;
  padding: 2px 5px;
  border-radius: 4px;
  font-size: 0.7em;
  font-weight: 600;
}


/* ========================================
 * 18. åŠ è½½åŠ¨ç”»ï¼ˆå¦‚æœéœ€è¦ï¼‰
 * ======================================== */

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.loading {
  animation: pulse 1.5s ease-in-out infinite;
}


/* ========================================
 * 19. æ‰“å°æ ·å¼ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰
 * ======================================== */

@media print {
  .message-content-container {
    box-shadow: none !important;
    border: 1px solid #ccc !important;
  }
  
  .markdown a {
    text-decoration: underline !important;
  }
}


/* ========================================
 * 20. å®éªŒæ€§åŠŸèƒ½ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
 * ======================================== */

/* å¯ç”¨å‰è¯·æµ‹è¯• */

/* æ‰“å­—æœºæ•ˆæœçš„å…‰æ ‡ */
/*
.typing-indicator::after {
  content: 'â–‹';
  animation: blink 1s infinite;
  color: var(--color-primary);
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}
*/

/* æ¶ˆæ¯æ‚¬æµ®æ•ˆæœ */
/*
.message-content-container:hover {
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15) !important;
  transform: translateY(-4px) !important;
}
*/

/* æ¯›ç»ç’ƒæ•ˆæœï¼ˆå¯èƒ½å½±å“æ€§èƒ½ï¼‰ */
/*
.message-content-container {
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}
*/


/* ========================================
 * è‡ªå®šä¹‰ç¬”è®°
 * ======================================== */

/*
 * ğŸ“ æˆ‘çš„é…è‰²æ–¹æ¡ˆï¼š
 * ä¸»è‰²ï¼švar(--color-primary) - #00b96b (é»˜è®¤ç»¿è‰²)
 * 
 * ğŸ’¡ å¿«é€Ÿè°ƒæ•´ï¼š
 * 1. ä¿®æ”¹åœ†è§’ï¼šè°ƒæ•´ --radius å˜é‡
 * 2. ä¿®æ”¹ä¸»è‰²è°ƒï¼šåœ¨è®¾ç½®ä¸­æ›´æ”¹ä¸»é¢˜è‰²
 * 3. ä¿®æ”¹å­—ä½“å¤§å°ï¼šè°ƒæ•´ body çš„ font-size
 * 
 * ğŸ”§ è°ƒè¯•æŠ€å·§ï¼š
 * - æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
 * - åœ¨ Elements æ ‡ç­¾ä¸­æŸ¥æ‰¾ #user-defined-custom-css
 * - åœ¨ Console ä¸­æµ‹è¯•æ–°æ ·å¼
 * 
 * ğŸ“š å­¦ä¹ èµ„æºï¼š
 * - CSS å˜é‡: https://developer.mozilla.org/zh-CN/docs/Web/CSS/--*
 * - é€‰æ‹©å™¨: https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Selectors
 * - Flexbox: https://css-tricks.com/snippets/css/a-guide-to-flexbox/
 * 
 * ğŸ¨ æ›´å¤šæ¨¡æ¿ï¼š
 * - è®¿é—® https://cherrycss.com/
 * - GitHub: https://github.com/CherryHQ/cherry-studio
 */
